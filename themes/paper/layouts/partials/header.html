<header class="header">
  {{ if .IsHome }}
  <h1 class="logo">
    <a class="site-name" href="{{ `` | absURL }}">{{ site.Title }}</a><a class="btn-dark"></a>
  </h1>
  {{ else }}
  <p class="logo">
    <a class="site-name" href="{{ `` | absURL }}">{{ site.Title }}</a><a class="btn-dark"></a>
  </p>
  {{ end }}

  <script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>

  {{ $url := .RelPermalink }}<!---->
  {{ with site.Menus.main }}
  <nav class="menu">
    {{ range . }}
    <a class="{{ if eq .URL $url }}active{{ end }}" href="{{ .URL }}">{{ .Name }}</a>
    {{ end }}
  </nav>
  {{ end }}<!---->

  {{ with $.Scratch.Get "social-list" }}
  <nav class="social">
    {{ range . }}
    <a
      class="{{ . }}"
      style="--url: url(./{{ . }}.svg)"
      href="https://{{ . }}.com/{{ index site.Params . }}"
      target="_blank"
    ></a>
    {{ end }}
    <!-- Language Switcher Dropdown -->
    {{ if $.IsTranslated }}
    <div class="language-dropdown">
      <button class="language-btn">
        {{ if eq $.Language.Lang "tr" }}TR{{ else if eq $.Language.Lang "en" }}EN{{ end }}
        <span class="arrow">â–¼</span>
      </button>
      <div class="language-menu">
        {{ range $.Translations }}
        <a href="{{ .RelPermalink }}" class="language-option">
          {{ if eq .Language.Lang "tr" }}ðŸ‡¹ðŸ‡· TÃ¼rkÃ§e{{ else if eq .Language.Lang "en" }}ðŸ‡¬ðŸ‡§ English{{ end }}
        </a>
        {{ end }}
      </div>
    </div>
    {{ end }}
  </nav>
  {{ end }}

  <!-- Language Dropdown Styles -->
  <style>
    .language-dropdown {
      position: relative;
      display: inline-block;
    }
    .language-btn {
      background: none;
      border: 1px solid var(--theme);
      color: var(--theme);
      padding: 6px 12px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }
    .language-btn:hover {
      background: var(--theme);
      color: var(--entry);
    }
    .language-btn .arrow {
      font-size: 10px;
      transition: transform 0.2s;
    }
    .language-dropdown:hover .arrow {
      transform: rotate(180deg);
    }
    .language-menu {
      display: none;
      position: absolute;
      right: 0;
      top: 100%;
      margin-top: 4px;
      background: var(--entry);
      border: 1px solid var(--border);
      border-radius: 4px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      min-width: 140px;
      z-index: 1000;
    }
    .language-dropdown:hover .language-menu {
      display: block;
    }
    .language-option {
      display: block;
      padding: 10px 16px;
      color: var(--theme);
      text-decoration: none;
      font-size: 14px;
      transition: background 0.2s;
    }
    .language-option:hover {
      background: var(--theme);
      color: var(--entry);
    }
    .language-option:first-child {
      border-radius: 4px 4px 0 0;
    }
    .language-option:last-child {
      border-radius: 0 0 4px 4px;
    }
  </style>
</header>
