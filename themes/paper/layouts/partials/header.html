<header class="header">
  {{ if .IsHome }}
  <h1 class="logo">
    <a class="site-name" href="{{ `` | absURL }}">{{ site.Title }}</a><a class="btn-dark"></a>
  </h1>
  {{ else }}
  <p class="logo">
    <a class="site-name" href="{{ `` | absURL }}">{{ site.Title }}</a><a class="btn-dark"></a>
  </p>
  {{ end }}

  <script>
    let bodyClx = document.body.classList;
    let btnDark = document.querySelector('.btn-dark');
    let sysDark = window.matchMedia('(prefers-color-scheme: dark)');
    let darkVal = localStorage.getItem('dark');

    let setDark = (isDark) => {
      bodyClx[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark ? 'yes' : 'no');
    };

    setDark(darkVal ? darkVal === 'yes' : sysDark.matches);
    requestAnimationFrame(() => bodyClx.remove('not-ready'));

    btnDark.addEventListener('click', () => setDark(!bodyClx.contains('dark')));
    sysDark.addEventListener('change', (event) => setDark(event.matches));
  </script>

  {{ $url := .RelPermalink }}<!---->
  {{ with site.Menus.main }}
  <nav class="menu">
    {{ range . }}
    <a class="{{ if eq .URL $url }}active{{ end }}" href="{{ .URL }}">{{ .Name }}</a>
    {{ end }}
  </nav>
  {{ end }}<!---->

  {{ with $.Scratch.Get "social-list" }}
  <nav class="social">
    {{ range . }}
    <a
      class="{{ . }}"
      style="--url: url(./{{ . }}.svg)"
      href="https://{{ . }}.com/{{ index site.Params . }}"
      target="_blank"
    ></a>
    {{ end }}
    <!-- Language Switcher Dropdown -->
    {{ if $.IsTranslated }}
    <div class="language-dropdown">
      <button class="language-btn">
        {{ if eq $.Language.Lang "tr" }}Turkish{{ else if eq $.Language.Lang "en" }}English{{ end }}
        <span class="arrow">â–¼</span>
      </button>
      <div class="language-menu">
        {{ range $.Translations }}
        <a href="{{ .RelPermalink }}" class="language-option">
          {{ if eq .Language.Lang "tr" }}Turkish{{ else if eq .Language.Lang "en" }}English{{ end }}
        </a>
        {{ end }}
      </div>
    </div>
    {{ end }}
  </nav>
  {{ end }}

  <!-- Language Dropdown Styles -->
  <style>
    .language-dropdown {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-left: 8px;
    }
    .language-btn {
      background: none;
      border: none;
      color: var(--theme);
      padding: 8px 14px;
      font-size: 14px;
      font-family: inherit;
      cursor: pointer;
      border-radius: 6px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s ease;
      white-space: nowrap;
      width: auto;
    }
    .language-btn:hover {
      background: var(--theme);
      color: var(--entry);
    }
    .language-btn .arrow {
      font-size: 10px;
      transition: transform 0.2s ease;
      margin-left: auto;
    }
    .language-dropdown:hover .arrow {
      transform: rotate(180deg);
    }
    .language-menu {
      display: none;
      position: absolute;
      right: 0;
      top: calc(100% - 2px);
      background: var(--theme);
      border: 1px solid var(--lit);
      border-radius: 6px;
      width: auto;
      z-index: 1000;
      overflow: hidden;
    }
    .language-dropdown:hover .language-menu,
    .language-menu:hover {
      display: block;
    }
    .language-option {
      display: block;
      padding: 12px 18px;
      color: #fff;
      text-decoration: none;
      font-size: 14px;
      font-family: inherit;
      transition: all 0.2s ease;
      white-space: nowrap;
      width: auto !important;
      margin-left: 0 !important;
      background: none !important;
    }
    .language-option:hover {
      background: var(--entry);
      color: var(--theme);
    }
    body:not(.dark) .language-option {
      color: #000;
    }
    /* Ensure emojis render properly */
    .language-btn,
    .language-option {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Hero Section */
    .hero-section {
      padding: 40px 0;
      margin-bottom: 32px;
      border-bottom: 1px solid var(--border);
    }
    .hero-profile {
      display: flex;
      align-items: center;
      gap: 16px;
      max-width: 700px;
    }
    .hero-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
      border: 2px solid var(--border);
    }
    .hero-info {
      flex: 1;
    }
    .hero-name {
      font-size: 1.5em;
      margin-bottom: 4px;
      font-weight: 600;
      color: var(--theme);
    }
    .hero-bio {
      font-size: 0.95em;
      color: var(--secondary);
      line-height: 1.5;
      margin: 0;
    }
    /* Responsive */
    @media (max-width: 640px) {
      .hero-profile {
        flex-direction: column;
        text-align: center;
      }
      .hero-avatar {
        width: 44px;
        height: 44px;
      }
      .hero-name {
        font-size: 1.3em;
      }
      .hero-bio {
        font-size: 0.9em;
      }
    }
    .page-header {
      text-align: center;
      padding: 40px 20px;
      margin-bottom: 30px;
      border-bottom: 1px solid var(--border);
    }
    .page-title {
      font-size: 2em;
      margin-bottom: 12px;
      font-weight: 600;
      color: var(--theme);
    }
    .page-description {
      font-size: 1.1em;
      color: var(--secondary);
      max-width: 500px;
      margin: 0 auto;
    }
  </style>
</header>
